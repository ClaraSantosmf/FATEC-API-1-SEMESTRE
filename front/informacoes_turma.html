<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Gerenciamento de Alunos</title>
     <link rel="stylesheet" href="../front/style/informacoes_turma.css" />
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/water.css@2/out/light.min.css"
    />
    <link rel="stylesheet" href="style/custom.css" />
  </head>
  <body>
    <header class="header">
      <a href="index.html">
        <img src="./imagens/Logo.png" alt="logo" />
      </a>
    </header>
  <body>
    <div class="container-info">
        <div class="info-turma">
          <p>Nome turma: tal</p>
          <p>Nome professor: tal</p>
        </div>
        <div class="container-ciclos">
          <p class="titulo-ciclos"><strong>Pesos Ciclos:</strong></p>
          <div class="ciclo-peso"></div>
        </div>
            
        </div>
    </div>
    <div class="aluno-container">
        <p class="aviso_ciclo_aberto">Ciclo aberto para nota: x</p>
        <div class="header-container">
          <div class="header-title titulo_alunos">Nome</div>
          <div class="header-title titulo_notas">Notas</div>
          <div class="header-title titulo_media">Media</div>
        </div>
          <div class="corpo_tabela">
            <!-- Os Alunos serão adicionadas automaticamente aqui -->
          </div>
    </div>
     <!-- Moleke -->
     <div class="muleke">
        <a href="index.html">
          <img src="./imagens/mascote2.png" alt="mascote" />
        </a>
      </div>
  <script>
    const turmas = {
      1: {
        nome: "ADS",
        professor: "Nadalete",
        data_de_inicio: "21/02/2023",
      },
    };

    const ciclo_peso = {
      '1': { ciclo: 1, peso: 1 },
      '2': { ciclo: 2, peso: 2 },
      '3': { ciclo: 3, peso: 3 },
      '4': { ciclo: 4, peso: 4 }
    }

    const cicloPeso = document.querySelector(".ciclo-peso");
    for (const chave in ciclo_peso) {
      if (ciclo_peso.hasOwnProperty(chave)) {
        const pesoData = ciclo_peso[chave];

        const NomeCiclo = document.createElement("span");
        NomeCiclo.className = "ciclo";
        NomeCiclo.innerHTML = `C${pesoData.ciclo}:`;

        const PesoCiclo = document.createElement("span");
        PesoCiclo.className = "peso";
        PesoCiclo.textContent = pesoData.peso;

        cicloPeso.appendChild(NomeCiclo);
        cicloPeso.appendChild(PesoCiclo);
      }
    }

    const alunos = {
      1: {
        nome: "Clara Santos"
      }
    }
    function GetAlunos() {
      const alunosData = [];

      for (const alunoId in alunos) {
        if (alunos.hasOwnProperty(alunoId)) {
          const aluno = alunos[alunoId];
          alunosData.push({ id: alunoId, nome: aluno.nome });
        }
      }
      console.log(alunosData)
      return alunosData;
    }

    ciclo_nota = {
      1: { id_ciclo: 1, valor: 6.5 },
      2: { id_ciclo: 2, valor: 8.5 },
      4: { id_ciclo: 3, valor: 7.5 },
      5: { id_ciclo: 4, valor: 9.5 },
    };

    function exibirAlunos(alunosData) {
      const container = document.querySelector(".corpo_tabela");

      for (const alunoId in alunosData) {
        if (alunosData.hasOwnProperty(alunoId)) {
          const aluno = alunosData[alunoId];
          const RAaluno = aluno.id;

          const alunoSquare = document.createElement("div");
          alunoSquare.className = "aluno-square";
          alunoSquare.id = `${aluno.id}`;

          const nomeAluno = document.createElement("p");
          nomeAluno.className = "aluno";
          nomeAluno.textContent = aluno.nome.charAt(0).toUpperCase() + aluno.nome.slice(1);

          alunoSquare.appendChild(nomeAluno);

          // Crie um campo "nota" para cada aluno
          const campoNota = document.createElement("div");
          campoNota.className = "campoNota";

          for (const cicloId in ciclo_nota) {
            if (ciclo_nota.hasOwnProperty(cicloId)) {
              const id_ciclo = ciclo_nota[cicloId].id_ciclo;
              const valorNota = ciclo_nota[cicloId].valor;

              const InputNotas = document.createElement("input");
              InputNotas.className = "valor";
              InputNotas.type = "number";
              InputNotas.value = valorNota;
              InputNotas.id = id_ciclo;

              // Verifique se a nota já foi atribuída para torná-la somente leitura
              if (CicloAberto(id_ciclo)) {
                InputNotas.setAttribute("readonly", true);
              }
              campoNota.appendChild(InputNotas);
            }
          }
          alunoSquare.appendChild(campoNota);

          const mediaAluno = document.createElement("div");
              mediaAluno.className = "media";
              mediaAluno.type = "number";
              mediaAluno.innerHTML = "Media"
              alunoSquare.appendChild(mediaAluno)
          container.appendChild(alunoSquare);
        }
      }
    }


    function CicloAberto(id_ciclo) {
      return true
    }

    exibirAlunos(GetAlunos());
  </script>
  </body>
</html>